{"sections":[],"metadata":{"title":"Enabling Complete Concurrency Checking"},"kind":"article","abstract":[{"text":"Incrementally address data-race safety issues by enabling diagnostics as warnings in your project.","type":"text"}],"primaryContentSections":[{"content":[{"inlineContent":[{"type":"text","text":"Data-race safety in the Swift 6 language mode is designed for incremental"},{"type":"text","text":" "},{"type":"text","text":"migration. You can address data-race safety issues in your projects"},{"type":"text","text":" "},{"text":"module-by-module, and you can enable the compiler’s actor isolation and","type":"text"},{"text":" ","type":"text"},{"type":"codeVoice","code":"Sendable"},{"text":" checking as warnings in the Swift 5 language mode, allowing you to","type":"text"},{"type":"text","text":" "},{"type":"text","text":"assess your progress toward eliminating data races before turning on the"},{"text":" ","type":"text"},{"type":"text","text":"Swift 6 language mode."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Complete data-race safety checking can be enabled as warnings in the Swift 5"},{"text":" ","type":"text"},{"type":"text","text":"language mode using the "},{"code":"-strict-concurrency","type":"codeVoice"},{"type":"text","text":" compiler flag."}]},{"level":2,"text":"Using the Swift compiler","anchor":"Using-the-Swift-compiler","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To enable complete concurrency checking when running "},{"type":"codeVoice","code":"swift"},{"text":" or ","type":"text"},{"code":"swiftc","type":"codeVoice"},{"type":"text","text":" "},{"type":"text","text":"directly at the command line, pass "},{"type":"codeVoice","code":"-strict-concurrency=complete"},{"text":":","type":"text"}]},{"syntax":null,"code":["~ swift -strict-concurrency=complete main.swift"],"type":"codeListing"},{"type":"heading","text":"Using SwiftPM","level":2,"anchor":"Using-SwiftPM"},{"type":"heading","level":3,"text":"In a SwiftPM command-line invocation","anchor":"In-a-SwiftPM-command-line-invocation"},{"type":"paragraph","inlineContent":[{"code":"-strict-concurrency=complete","type":"codeVoice"},{"text":" can be passed in a Swift package manager","type":"text"},{"text":" ","type":"text"},{"text":"command-line invocation using the ","type":"text"},{"type":"codeVoice","code":"-Xswiftc"},{"type":"text","text":" flag:"}]},{"type":"codeListing","syntax":null,"code":["~ swift build -Xswiftc -strict-concurrency=complete","~ swift test -Xswiftc -strict-concurrency=complete"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This can be useful to gauge the amount of concurrency warnings before adding"},{"type":"text","text":" "},{"type":"text","text":"the flag permanently in the package manifest as described in the following"},{"type":"text","text":" "},{"type":"text","text":"section."}]},{"type":"heading","text":"In a SwiftPM package manifest","level":3,"anchor":"In-a-SwiftPM-package-manifest"},{"inlineContent":[{"type":"text","text":"To enable complete concurrency checking for a target in a Swift package using"},{"type":"text","text":" "},{"text":"Swift 5.9 or Swift 5.10 tools, use ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/packagedescription\/swiftsetting\/enableexperimentalfeature(_:_:)"},{"text":" ","type":"text"},{"type":"text","text":"in the Swift settings for the given target:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":[".target(","  name: \"MyTarget\",","  swiftSettings: [","    .enableExperimentalFeature(\"StrictConcurrency\")","  ]",")"]},{"type":"paragraph","inlineContent":[{"text":"When using Swift 6.0 tools or later, use ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/packagedescription\/swiftsetting\/enableupcomingfeature(_:_:)","isActive":true,"type":"reference"},{"type":"text","text":" "},{"text":"in the Swift settings for a pre-Swift 6 language mode target:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":[".target(","  name: \"MyTarget\",","  swiftSettings: [","    .enableUpcomingFeature(\"StrictConcurrency\")","  ]",")"]},{"type":"paragraph","inlineContent":[{"text":"Targets that adopt the Swift 6 language mode have complete checking","type":"text"},{"type":"text","text":" "},{"type":"text","text":"enabled unconditionally and do not require any settings changes."}]},{"level":2,"type":"heading","text":"Using Xcode","anchor":"Using-Xcode"},{"inlineContent":[{"text":"To enable complete concurrency checking in an Xcode project, set the","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"“Strict Concurrency Checking” setting to “Complete” in the Xcode build"},{"type":"text","text":" "},{"type":"text","text":"settings. Alternatively, you can set "},{"type":"codeVoice","code":"SWIFT_STRICT_CONCURRENCY"},{"type":"text","text":" to "},{"type":"codeVoice","code":"complete"},{"type":"text","text":" "},{"text":"in an xcconfig file:","type":"text"}],"type":"paragraph"},{"code":["\/\/ In a Settings.xcconfig","","SWIFT_STRICT_CONCURRENCY = complete;"],"type":"codeListing","syntax":null}],"kind":"content"}],"schemaVersion":{"major":0,"patch":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/org.swift.migration.6\/documentation\/MigrationGuide"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/org.swift.migration.6\/documentation\/Swift-6-Concurrency-Migration-Guide\/CompleteChecking"},"references":{"https://developer.apple.com/documentation/packagedescription/swiftsetting/enableexperimentalfeature(_:_:)":{"url":"https:\/\/developer.apple.com\/documentation\/packagedescription\/swiftsetting\/enableexperimentalfeature(_:_:)","titleInlineContent":[{"code":"SwiftSetting.enableExperimentalFeature","type":"codeVoice"}],"identifier":"https:\/\/developer.apple.com\/documentation\/packagedescription\/swiftsetting\/enableexperimentalfeature(_:_:)","title":"SwiftSetting.enableExperimentalFeature","type":"link"},"doc://org.swift.migration.6/documentation/MigrationGuide":{"type":"topic","abstract":[],"kind":"article","title":"Migrating to Swift 6","role":"collection","identifier":"doc:\/\/org.swift.migration.6\/documentation\/MigrationGuide","url":"\/documentation\/migrationguide"},"https://developer.apple.com/documentation/packagedescription/swiftsetting/enableupcomingfeature(_:_:)":{"type":"link","titleInlineContent":[{"code":"SwiftSetting.enableUpcomingFeature","type":"codeVoice"}],"url":"https:\/\/developer.apple.com\/documentation\/packagedescription\/swiftsetting\/enableupcomingfeature(_:_:)","identifier":"https:\/\/developer.apple.com\/documentation\/packagedescription\/swiftsetting\/enableupcomingfeature(_:_:)","title":"SwiftSetting.enableUpcomingFeature"}}}